"use strict";(self.webpackChunkwpplugin_docs_servebolt_com=self.webpackChunkwpplugin_docs_servebolt_com||[]).push([[388],{3905:(t,e,a)=>{a.d(e,{Zo:()=>d,kt:()=>c});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var p=n.createContext({}),m=function(t){var e=n.useContext(p),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},d=function(t){var e=m(t.components);return n.createElement(p.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},g=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,p=t.parentName,d=o(t,["components","mdxType","originalType","parentName"]),g=m(a),c=r,s=g["".concat(p,".").concat(c)]||g[c]||u[c]||l;return a?n.createElement(s,i(i({ref:e},d),{},{components:a})):n.createElement(s,i({ref:e},d))}));function c(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=g;var o={};for(var p in e)hasOwnProperty.call(e,p)&&(o[p]=e[p]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var m=2;m<l;m++)i[m]=a[m];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"},3646:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>m});var n=a(3117),r=(a(7294),a(3905));const l={sidebar_position:7,title:"Understanding Cache Tags"},i=void 0,o={unversionedId:"cache-tags",id:"cache-tags",title:"Understanding Cache Tags",description:"From version 3.5.11 onwards of the Servebolt Optimizer the performs cache priming and purging via CacheTags when using Accelerated Domains.",source:"@site/docs/cache-tags.md",sourceDirName:".",slug:"/cache-tags",permalink:"/docs/cache-tags",draft:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7,title:"Understanding Cache Tags"},sidebar:"tutorialSidebar",previous:{title:"Changelog",permalink:"/docs/changelog"},next:{title:"WP CLI commands",permalink:"/docs/cli-commands"}},p={},m=[{value:"Cache Tag make-up",id:"cache-tag-make-up",level:2}],d={toc:m};function u(t){let{components:e,...a}=t;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"From version 3.5.11 onwards of the Servebolt Optimizer the performs cache priming and purging via CacheTags when using Accelerated Domains. "),(0,r.kt)("p",null,"The key benefit of cache tags is that it can clear many thousands of URL's in one go while leaving vast portions of the site with caching entact. "),(0,r.kt)("p",null,"When a page is created, updated or deleted, or is comments are approved, or edited, there is a cache purge event that happens for it, and all the places where it might have a reference. "),(0,r.kt)("p",null,"Previously to using cache tags, this might mean many thousands of URLs. For example if a post is authored by the same person who has made 500 other articels, there will be 50+ urls to purge just for the author archive, also the month, year and day archives will need to be purged, as will RSS and the homepage. "),(0,r.kt)("p",null,"If we add on top all of the various tags and categories and their pagination, this can lead to there being many thousands of URL's that need to be purged.  This takes time to complete all of them. "),(0,r.kt)("p",null,"With cache tags it take next to no time as each of these archives and taxonomy terms can be purged with only 1 request to clear the cache tag for them.  i.e. the author archive stops being 50 urls and becomes just 1 tag. As we can clear 30 tags in one request, this means that we can clear the entire presence of a page on a site incredably quickly. "),(0,r.kt)("h2",{id:"cache-tag-make-up"},"Cache Tag make-up"),(0,r.kt)("p",null,"We use the strategy of :"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"[id from inside the environment.json file]-[cache-tag numeric id]-[optonal value for cache tag]-[optional blog-id when on multi-site]")),(0,r.kt)("p",null,"in practice this might look like\n",(0,r.kt)("inlineCode",{parentName:"p"},"1234-11-1-1")),(0,r.kt)("p",null,"This would be the tag associated with the Author Archive of the author 1 on a multisite's 1st blog for the site with the id 1234."),(0,r.kt)("p",null,"Here is a table of all the cache tag numeric values."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"id"),(0,r.kt)("th",{parentName:"tr",align:null},"Constant Name"),(0,r.kt)("th",{parentName:"tr",align:null},"What it means"),(0,r.kt)("th",{parentName:"tr",align:null},"used by plugin"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"00"),(0,r.kt)("td",{parentName:"tr",align:null},"HOME"),(0,r.kt)("td",{parentName:"tr",align:null},"The homepage"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"HTML"),(0,r.kt)("td",{parentName:"tr",align:null},"Any HTML or RSS page"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"02"),(0,r.kt)("td",{parentName:"tr",align:null},"SEARCH"),(0,r.kt)("td",{parentName:"tr",align:null},"Search page"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"03"),(0,r.kt)("td",{parentName:"tr",align:null},"SITEMAP"),(0,r.kt)("td",{parentName:"tr",align:null},"Any sitemap xml page"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"10"),(0,r.kt)("td",{parentName:"tr",align:null},"POST_TYPE"),(0,r.kt)("td",{parentName:"tr",align:null},"Post type name"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"11"),(0,r.kt)("td",{parentName:"tr",align:null},"AUTHOR"),(0,r.kt)("td",{parentName:"tr",align:null},"Author ID"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"12"),(0,r.kt)("td",{parentName:"tr",align:null},"DATE"),(0,r.kt)("td",{parentName:"tr",align:null},"Full date"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"13"),(0,r.kt)("td",{parentName:"tr",align:null},"MONTH"),(0,r.kt)("td",{parentName:"tr",align:null},"Month"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"14"),(0,r.kt)("td",{parentName:"tr",align:null},"YEAR"),(0,r.kt)("td",{parentName:"tr",align:null},"Year"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"20"),(0,r.kt)("td",{parentName:"tr",align:null},"TERM_ID"),(0,r.kt)("td",{parentName:"tr",align:null},"Taxonomy term ID"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"21"),(0,r.kt)("td",{parentName:"tr",align:null},"TAXONOMY_ID"),(0,r.kt)("td",{parentName:"tr",align:null},"Taxonomy ID"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"30"),(0,r.kt)("td",{parentName:"tr",align:null},"FEEDS"),(0,r.kt)("td",{parentName:"tr",align:null},"All RSS feeds"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"31"),(0,r.kt)("td",{parentName:"tr",align:null},"COMMENT_FEED"),(0,r.kt)("td",{parentName:"tr",align:null},"Comment RSS feed"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"40"),(0,r.kt)("td",{parentName:"tr",align:null},"WOOCOMMERCE"),(0,r.kt)("td",{parentName:"tr",align:null},"Pages generate by WooCommerce"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"41"),(0,r.kt)("td",{parentName:"tr",align:null},"WOOCOMMERCE_SHOP"),(0,r.kt)("td",{parentName:"tr",align:null},"Shop page of WooCommerce"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"42"),(0,r.kt)("td",{parentName:"tr",align:null},"WOOCOMMERCE_CATEGORY"),(0,r.kt)("td",{parentName:"tr",align:null},"WooCommerce default category taxonomy"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"43"),(0,r.kt)("td",{parentName:"tr",align:null},"WOOCOMMERCE_TAG"),(0,r.kt)("td",{parentName:"tr",align:null},"WooCommerce default tag taxonomy"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"44"),(0,r.kt)("td",{parentName:"tr",align:null},"WOOCOMMERCE_PRODUCT"),(0,r.kt)("td",{parentName:"tr",align:null},"WooCommerce Product page"),(0,r.kt)("td",{parentName:"tr",align:null},"X")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"45"),(0,r.kt)("td",{parentName:"tr",align:null},"WOOCOMMERCE_PRODUCT_ID"),(0,r.kt)("td",{parentName:"tr",align:null},"WooCommerce Product ID"),(0,r.kt)("td",{parentName:"tr",align:null},"X")))))}u.isMDXComponent=!0}}]);